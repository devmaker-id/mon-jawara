<section class="content mt-3">
  <div class="container-fluid">
    
    <% if (flashData) { %>
      <div class="alert alert-<%= flashData.type %> alert-dismissible fade show" role="alert">
        <%= flashData.text %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    <% } %>

    <a href="/admin/olt" class="btn btn-secondary mb-3">
      <i class="bi bi-arrow-left"></i> Kembali ke List
    </a>

    <div class="card shadow">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="bi bi-plus-circle"></i> Tambah OLT Baru</h5>
      </div>
      <form action="/olt/add" method="POST">
        <div class="card-body">
          <div class="mb-3">
            <label>Nama OLT</label>
            <input type="text" name="nama" class="form-control" required>
          </div>

          <div class="mb-3">
            <label>IP Address</label>
            <input type="text" name="ip" class="form-control" required>
          </div>

          <div class="mb-3">
            <label>Merk</label>
            <input type="text" name="merk" class="form-control">
          </div>

          <div class="mb-3">
            <label>Status</label>
            <select name="status" class="form-select">
              <option>Online</option>
              <option>Offline</option>
            </select>
          </div>

          <div class="mb-3">
            <label>Jumlah Port PON</label>
            <input type="number" name="pon" class="form-control" min="1" required>
          </div>

          <div class="mb-3">
            <label>Koneksi Tersedia</label>
          
            <!-- PING -->
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="koneksi" value="ping" id="connPing" checked disabled>
              <label class="form-check-label" for="connPing">Ping <span class="text-muted">(Wajib)</span></label>
            </div>

          
            <!-- TELNET -->
            <div class="form-check">
              <input class="form-check-input koneksi-check" type="checkbox" name="koneksi" value="telnet" id="connTelnet" data-port="portTelnet">
              <label class="form-check-label" for="connTelnet">Telnet</label>
            </div>
            <div class="ms-4 mt-1 d-none" id="portTelnet">
              <input type="number" name="port_telnet" class="form-control form-control-sm" placeholder="Port Telnet (default: 23)">
            </div>
          
            <!-- SSH -->
            <div class="form-check">
              <input class="form-check-input koneksi-check" type="checkbox" name="koneksi" value="ssh" id="connSSH" data-port="portSSH">
              <label class="form-check-label" for="connSSH">SSH</label>
            </div>
            <div class="ms-4 mt-1 d-none" id="portSSH">
              <input type="number" name="port_ssh" class="form-control form-control-sm" placeholder="Port SSH (default: 22)">
            </div>
          
            <!-- API -->
            <div class="form-check">
              <input class="form-check-input koneksi-check" type="checkbox" name="koneksi" value="api" id="connAPI" data-port="portAPI">
              <label class="form-check-label" for="connAPI">API</label>
            </div>
            <div class="ms-4 mt-1 d-none" id="portAPI">
              <input type="number" name="port_api" class="form-control form-control-sm" placeholder="Port API (default: 8080)">
            </div>
          
            <!-- Web GUI -->
            <div class="form-check">
              <input class="form-check-input koneksi-check" type="checkbox" name="koneksi" value="web" id="connWeb" data-port="portWeb">
              <label class="form-check-label" for="connWeb">Web GUI</label>
            </div>
            <div class="ms-4 mt-1 d-none" id="portWeb">
              <input type="number" name="port_web" class="form-control form-control-sm" placeholder="Port Web GUI (default: 80 / 443)">
            </div>
          </div>

          
          
        </div>
        <div class="card-footer text-end">
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-save"></i> Simpan
          </button>
        </div>
      </form>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const checkboxes = document.querySelectorAll('.koneksi-check');

    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        const portGroupId = checkbox.dataset.port;
        const portGroup = document.getElementById(portGroupId);

        if (checkbox.checked) {
          portGroup.classList.remove('d-none');
        } else {
          portGroup.classList.add('d-none');
        }
      });
    });
  });
</script>

