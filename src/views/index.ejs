<section class="content mt-2">
  <div class="container-fluid">

    <!-- STATISTIK -->
    <div class="row text-nowrap">
      <% let stats = [
        { icon: 'bi-cash-coin', label: 'Pendapatan Hari Ini', value: 'Rp 1.200.000', color: 'warning' },
        { icon: 'bi-people-fill', label: 'Total Pelanggan', value: 120, color: 'info' },
        { icon: 'bi-ticket-fill', label: 'Total Voucher', value: 11340, color: 'success' },
        { icon: 'bi-shield-lock-fill', label: 'Server VPN', value: 4, color: 'primary' },
        { icon: 'bi-wifi', label: 'Hotspot Online', value: 18, color: 'primary' },
        { icon: 'bi-plug', label: 'PPPoE Online', value: 12, color: 'success' },
        { icon: 'bi-ticket-fill', label: 'Expired Voucher', value: 1670, color: 'danger' },
        { icon: 'bi-calendar', label: 'Expired Lisensi', value: "99-99-9999", color: 'secondary' },
      ]; %>

      <% stats.forEach(stat => { %>
        <div class="col-6 col-sm-6 col-md-3 mb-3">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body d-flex align-items-center text-nowrap">
              <div class="me-3">
                <div class="bg-<%= stat.color %> text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 45px; height: 45px;">
                  <i class="bi <%= stat.icon %> fs-4"></i>
                </div>
              </div>
              <div>
                <h6 class="mb-1 fw-semibold"><%= stat.label %></h6>
                <h5 class="mb-0 fw-bold"><%= stat.value %></h5>
              </div>
            </div>
            <div class="card-footer bg-white">
              <a href="#" class="text-decoration-none small">Lihat detail...</a>
            </div>
          </div>
        </div>
      <% }) %>
    </div>

    <!-- USER JATUH TEMPO -->
    <div class="card mt-4">
      <div class="card-header bg-danger text-white text-nowrap">
        <h5 class="card-title mb-0"><i class="bi bi-exclamation-triangle-fill"></i> Pengguna Jatuh Tempo / Telat Bayar</h5>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-bordered table-hover mb-0 text-nowrap">
            <thead class="table-light">
              <tr>
                <th>#</th>
                <th>Username</th>
                <th>Profile</th>
                <th>Tanggal Expired</th>
                <th>Status</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody>
              <% let dummyUsers = [
                { id: 1, username: 'andi', profile: 'Hotspot 5Mbps', expired: '2025-07-15', status: 'Telat Bayar' },
                { id: 2, username: 'budi', profile: 'PPPoE 10Mbps', expired: '2025-07-14', status: 'Jatuh Tempo' },
                { id: 3, username: 'sari', profile: 'Hotspot 3Mbps', expired: '2025-07-13', status: 'Telat Bayar' }
              ]; %>

              <% dummyUsers.forEach((user, index) => { %>
                <tr>
                  <td><%= index + 1 %></td>
                  <td><strong><%= user.username %></strong></td>
                  <td><%= user.profile %></td>
                  <td><%= user.expired %></td>
                  <td>
                    <% if (user.status === 'Telat Bayar') { %>
                      <span class="badge bg-danger"><i class="bi bi-exclamation-circle"></i> Telat Bayar</span>
                    <% } else { %>
                      <span class="badge bg-warning text-dark"><i class="bi bi-hourglass-split"></i> Jatuh Tempo</span>
                    <% } %>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-info text-nowrap" data-bs-toggle="modal" data-bs-target="#detailUserModal<%= user.id %>">
                      <i class="bi bi-eye"></i> Lihat
                    </button>
                    <button class="btn btn-sm btn-success text-nowrap">
                      <i class="bi bi-wallet2"></i> Bayar
                    </button>
                  </td>
                </tr>

                <!-- Modal Detail User -->
                <div class="modal fade" id="detailUserModal<%= user.id %>" tabindex="-1" aria-labelledby="detailUserLabel<%= user.id %>" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header bg-info text-white">
                        <h5 class="modal-title" id="detailUserLabel<%= user.id %>">Detail Pengguna: <%= user.username %></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>
                      <div class="modal-body">
                        <p><strong>Username:</strong> <%= user.username %></p>
                        <p><strong>Profile:</strong> <%= user.profile %></p>
                        <p><strong>Expired:</strong> <%= user.expired %></p>
                        <p><strong>Status:</strong> <%= user.status %></p>
                      </div>
                      <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <button class="btn btn-primary">Kirim Pengingat</button>
                      </div>
                    </div>
                  </div>
                </div>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</section>
