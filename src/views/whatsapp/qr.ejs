<section class="content mt-2">
    <div class="container-fluid">
        <div class="card shadow">
            <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                <h3 class="card-title mb-0">
                <i class="bi bi-hdd-network"></i> Login Whatsapp
                </h3>
            </div>

            <div class="card-body">
                <p id="status">Menunggu QR...</p>
                <canvas id="qr"></canvas>
            </div>
        </div>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
  async function loadQR() {
    const res = await fetch("/whatsapp/qr/data");
    const data = await res.json();

    if (data.connected) {
      document.getElementById("status").innerText = "âœ… WhatsApp Connected";
      return;
    }

    if (data.qr) {
      QRCode.toCanvas(
        document.getElementById("qr"),
        data.qr,
        { width: 250 }
      );
    }
  }

  setInterval(loadQR, 2000);
</script>
